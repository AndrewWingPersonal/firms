{"ast":null,"code":"var _s2 = $RefreshSig$();\nimport { useState, useEffect, useRef } from 'react';\nconst useFetch = url => {\n  _s2();\n  var _s = $RefreshSig$();\n  const cache = useRef({});\n  const [status, setStatus] = useState('idle');\n  const [data, setData] = useState([]);\n  _s(useEffect(_s(() => {\n    _s();\n    if (!url) return;\n    const [executed, setExecuted] = useState(false);\n    const fetchData = async () => {\n      setStatus('fetching');\n      if (cache.current[url]) {\n        const data = cache.current[url];\n        setData(data);\n        setStatus('fetched');\n      } else {\n        try {\n          const response = await fetch(url);\n          if (!response.ok) {\n            throw new Error('Network response was not ok');\n          }\n          const data = (await response.json()) || {};\n          cache.current[url] = data; // set response in cache;\n          setData(data);\n          setStatus('fetched');\n        } catch (error) {\n          console.log(\"error with fetch\");\n        }\n      }\n      setExecuted(true);\n    };\n    if (!executed) {\n      fetchData();\n    }\n  }, \"TcqYRww6OIQRTlKF24qaXduEOUQ=\"), [url]), \"TcqYRww6OIQRTlKF24qaXduEOUQ=\");\n  return {\n    status,\n    data\n  };\n};\n_s2(useFetch, \"6m0BFjnElTzNGoLC+sMYrhL/Mxc=\");\nexport default useFetch;","map":{"version":3,"names":["useState","useEffect","useRef","useFetch","url","_s2","_s","$RefreshSig$","cache","status","setStatus","data","setData","executed","setExecuted","fetchData","current","response","fetch","ok","Error","json","error","console","log"],"sources":["/home/andrew/react_learning/custom_hook/preqin/src/hooks/useFetch.js"],"sourcesContent":["\nimport {useState, useEffect, useRef} from 'react';\n\nconst useFetch = (url) => {\n    const cache = useRef({});\n    const [status, setStatus] = useState('idle');\n    const [data, setData] = useState([]);\n\n    useEffect(() => {\n        if (!url) return;\n\n        const [executed, setExecuted] = useState(false); \n\n        const fetchData = async () => {\n            setStatus('fetching');\n            if (cache.current[url]) {\n                const data = cache.current[url];\n                setData(data);\n                setStatus('fetched');\n            } else {\n                try {\n                  const response = await fetch(url);\n                  if (!response.ok) {\n                    throw new Error('Network response was not ok');\n                  }\n                  const data = await response.json() || {};\n                  cache.current[url] = data; // set response in cache;\n                  setData(data);\n                  setStatus('fetched');\n                } catch(error) {\n                    console.log(\"error with fetch\")\n                }\n            }\n            setExecuted(true)\n        };\n\n        if (!executed) {\n            fetchData();\n        }\n    }, [url]);\n\n    return { status, data };\n};\n\nexport default useFetch;"],"mappings":";AACA,SAAQA,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAO,OAAO;AAEjD,MAAMC,QAAQ,GAAIC,GAAG,IAAK;EAAAC,GAAA;EAAA,IAAAC,EAAA,GAAAC,YAAA;EACtB,MAAMC,KAAK,GAAGN,MAAM,CAAC,CAAC,CAAC,CAAC;EACxB,MAAM,CAACO,MAAM,EAAEC,SAAS,CAAC,GAAGV,QAAQ,CAAC,MAAM,CAAC;EAC5C,MAAM,CAACW,IAAI,EAAEC,OAAO,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EAEpCM,EAAA,CAAAL,SAAS,CAAAK,EAAA,CAAC,MAAM;IAAAA,EAAA;IACZ,IAAI,CAACF,GAAG,EAAE;IAEV,MAAM,CAACS,QAAQ,EAAEC,WAAW,CAAC,GAAGd,QAAQ,CAAC,KAAK,CAAC;IAE/C,MAAMe,SAAS,GAAG,MAAAA,CAAA,KAAY;MAC1BL,SAAS,CAAC,UAAU,CAAC;MACrB,IAAIF,KAAK,CAACQ,OAAO,CAACZ,GAAG,CAAC,EAAE;QACpB,MAAMO,IAAI,GAAGH,KAAK,CAACQ,OAAO,CAACZ,GAAG,CAAC;QAC/BQ,OAAO,CAACD,IAAI,CAAC;QACbD,SAAS,CAAC,SAAS,CAAC;MACxB,CAAC,MAAM;QACH,IAAI;UACF,MAAMO,QAAQ,GAAG,MAAMC,KAAK,CAACd,GAAG,CAAC;UACjC,IAAI,CAACa,QAAQ,CAACE,EAAE,EAAE;YAChB,MAAM,IAAIC,KAAK,CAAC,6BAA6B,CAAC;UAChD;UACA,MAAMT,IAAI,GAAG,OAAMM,QAAQ,CAACI,IAAI,CAAC,CAAC,KAAI,CAAC,CAAC;UACxCb,KAAK,CAACQ,OAAO,CAACZ,GAAG,CAAC,GAAGO,IAAI,CAAC,CAAC;UAC3BC,OAAO,CAACD,IAAI,CAAC;UACbD,SAAS,CAAC,SAAS,CAAC;QACtB,CAAC,CAAC,OAAMY,KAAK,EAAE;UACXC,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAC;QACnC;MACJ;MACAV,WAAW,CAAC,IAAI,CAAC;IACrB,CAAC;IAED,IAAI,CAACD,QAAQ,EAAE;MACXE,SAAS,CAAC,CAAC;IACf;EACJ,CAAC,mCAAE,CAACX,GAAG,CAAC,CAAC;EAET,OAAO;IAAEK,MAAM;IAAEE;EAAK,CAAC;AAC3B,CAAC;AAACN,GAAA,CAvCIF,QAAQ;AAyCd,eAAeA,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}