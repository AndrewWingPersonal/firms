{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect, useRef } from 'react';\nconst useFetch = () => {\n  _s();\n  const cache = useRef({});\n  const [status, setStatus] = useState('idle');\n  const [data, setData] = useState([]);\n  const [executed, setExecuted] = useState(false);\n  const url = \"https://api.preqin.com/api/Investor?FirmId=2670\";\n  useEffect(() => {\n    if (!url) return;\n    const fetchData = async () => {\n      //setStatus('fetching');\n      if (cache.current[url]) {\n        const data = cache.current[url];\n        setData(data);\n        //setStatus('fetched');\n      } else {\n        try {\n          const response = await fetch(url);\n          if (!response.ok) {\n            console.log(\"THROWING ERROR\");\n            throw new Error('Network response was not ok');\n          }\n          const data = (await response.json()) || {};\n          cache.current[url] = data; // set response in cache;\n          setData(data);\n          //setStatus('fetched');\n        } catch (error) {\n          console.log(\"error with fetch\");\n        }\n      }\n      setExecuted(true);\n    };\n    if (!executed) {\n      fetchData();\n    }\n  }, [url, executed]);\n  return {\n    status,\n    data\n  };\n};\n_s(useFetch, \"mNWC0NEFYm8oQ3viRZxoQ4vlog4=\");\nexport default useFetch;","map":{"version":3,"names":["useState","useEffect","useRef","useFetch","_s","cache","status","setStatus","data","setData","executed","setExecuted","url","fetchData","current","response","fetch","ok","console","log","Error","json","error"],"sources":["/home/andrew/react_learning/custom_hook/preqin/src/hooks/useFetch.js"],"sourcesContent":["\nimport {useState, useEffect, useRef} from 'react';\n\nconst useFetch = () => {\n    const cache = useRef({});\n    const [status, setStatus] = useState('idle');\n    const [data, setData] = useState([]);\n    const [executed, setExecuted] = useState(false);\n\n    const url = \"https://api.preqin.com/api/Investor?FirmId=2670\";\n\n    useEffect(() => {\n        if (!url) return;\n\n        const fetchData = async () => {\n            //setStatus('fetching');\n            if (cache.current[url]) {\n                const data = cache.current[url];\n                setData(data);\n                //setStatus('fetched');\n            } else {\n                try {\n                  const response = await fetch(url);\n                  if (!response.ok) {\n                    console.log(\"THROWING ERROR\")\n                    throw new Error('Network response was not ok');\n                  }\n                  const data = await response.json() || {};\n                  cache.current[url] = data; // set response in cache;\n                  setData(data);\n                  //setStatus('fetched');\n                } catch(error) {\n                    console.log(\"error with fetch\")\n                }\n            }\n            setExecuted(true)\n        };\n\n        if (!executed) {\n            fetchData();\n        }\n    }, [url, executed]);\n\n    return { status, data };\n};\n\nexport default useFetch;"],"mappings":";AACA,SAAQA,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAO,OAAO;AAEjD,MAAMC,QAAQ,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACnB,MAAMC,KAAK,GAAGH,MAAM,CAAC,CAAC,CAAC,CAAC;EACxB,MAAM,CAACI,MAAM,EAAEC,SAAS,CAAC,GAAGP,QAAQ,CAAC,MAAM,CAAC;EAC5C,MAAM,CAACQ,IAAI,EAAEC,OAAO,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAACU,QAAQ,EAAEC,WAAW,CAAC,GAAGX,QAAQ,CAAC,KAAK,CAAC;EAE/C,MAAMY,GAAG,GAAG,iDAAiD;EAE7DX,SAAS,CAAC,MAAM;IACZ,IAAI,CAACW,GAAG,EAAE;IAEV,MAAMC,SAAS,GAAG,MAAAA,CAAA,KAAY;MAC1B;MACA,IAAIR,KAAK,CAACS,OAAO,CAACF,GAAG,CAAC,EAAE;QACpB,MAAMJ,IAAI,GAAGH,KAAK,CAACS,OAAO,CAACF,GAAG,CAAC;QAC/BH,OAAO,CAACD,IAAI,CAAC;QACb;MACJ,CAAC,MAAM;QACH,IAAI;UACF,MAAMO,QAAQ,GAAG,MAAMC,KAAK,CAACJ,GAAG,CAAC;UACjC,IAAI,CAACG,QAAQ,CAACE,EAAE,EAAE;YAChBC,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;YAC7B,MAAM,IAAIC,KAAK,CAAC,6BAA6B,CAAC;UAChD;UACA,MAAMZ,IAAI,GAAG,OAAMO,QAAQ,CAACM,IAAI,CAAC,CAAC,KAAI,CAAC,CAAC;UACxChB,KAAK,CAACS,OAAO,CAACF,GAAG,CAAC,GAAGJ,IAAI,CAAC,CAAC;UAC3BC,OAAO,CAACD,IAAI,CAAC;UACb;QACF,CAAC,CAAC,OAAMc,KAAK,EAAE;UACXJ,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAC;QACnC;MACJ;MACAR,WAAW,CAAC,IAAI,CAAC;IACrB,CAAC;IAED,IAAI,CAACD,QAAQ,EAAE;MACXG,SAAS,CAAC,CAAC;IACf;EACJ,CAAC,EAAE,CAACD,GAAG,EAAEF,QAAQ,CAAC,CAAC;EAEnB,OAAO;IAAEJ,MAAM;IAAEE;EAAK,CAAC;AAC3B,CAAC;AAACJ,EAAA,CAzCID,QAAQ;AA2Cd,eAAeA,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}